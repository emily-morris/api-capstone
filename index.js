var yelpData = {
    "businesses": [
        {
            "id": "ktqBRPrf_6vy2wzAnpk2qQ",
            "alias": "happy-tree-child-development-center-carrollton-2",
            "name": "Happy Tree Child Development Center",
            "image_url": "https://s3-media4.fl.yelpcdn.com/bphoto/YCo4J80nNxCNckvzx-qAcg/o.jpg",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/happy-tree-child-development-center-carrollton-2?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 9,
            "categories": [
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                },
                {
                    "alias": "preschools",
                    "title": "Preschools"
                }
            ],
            "rating": 5,
            "coordinates": {
                "latitude": 32.983642578125,
                "longitude": -96.8434143066406
            },
            "transactions": [],
            "location": {
                "address1": "3225 Belmeade Dr",
                "address2": "",
                "address3": "",
                "city": "Carrollton",
                "zip_code": "75006",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "3225 Belmeade Dr",
                    "Carrollton, TX 75006"
                ]
            },
            "phone": "+19727331652",
            "display_phone": "(972) 733-1652",
            "distance": 2813.6372316239917
        },
        {
            "id": "fIPTRDOOBI983FWhVjkqZA",
            "alias": "xplor-preschool-and-school-age-care-carrollton",
            "name": "Xplor Preschool & School Age Care",
            "image_url": "https://s3-media2.fl.yelpcdn.com/bphoto/7TtCCmoS6YvD5gDPS_I1RA/o.jpg",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/xplor-preschool-and-school-age-care-carrollton?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 5,
            "categories": [
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                },
                {
                    "alias": "preschools",
                    "title": "Preschools"
                }
            ],
            "rating": 5,
            "coordinates": {
                "latitude": 32.985282,
                "longitude": -96.8649369
            },
            "transactions": [],
            "location": {
                "address1": "2525 E Trinity Mills Rd",
                "address2": null,
                "address3": null,
                "city": "Carrollton",
                "zip_code": "75006",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "2525 E Trinity Mills Rd",
                    "Carrollton, TX 75006"
                ]
            },
            "phone": "+19724166471",
            "display_phone": "(972) 416-6471",
            "distance": 1978.071491999618
        },
        {
            "id": "Nxv0xRuvh7tb70Q5U11K7Q",
            "alias": "primrose-school-of-prestonwood-dallas",
            "name": "Primrose School of Prestonwood",
            "image_url": "https://s3-media1.fl.yelpcdn.com/bphoto/ZpSCBWZvg6O_pEEJrDXXmw/o.jpg",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/primrose-school-of-prestonwood-dallas?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 11,
            "categories": [
                {
                    "alias": "preschools",
                    "title": "Preschools"
                },
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                }
            ],
            "rating": 4,
            "coordinates": {
                "latitude": 32.958173,
                "longitude": -96.819698
            },
            "transactions": [],
            "location": {
                "address1": "15237 Montfort Dr",
                "address2": "",
                "address3": "",
                "city": "Dallas",
                "zip_code": "75248",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "15237 Montfort Dr",
                    "Dallas, TX 75248"
                ]
            },
            "phone": "+14697919131",
            "display_phone": "(469) 791-9131",
            "distance": 4560.439337021579
        },
        {
            "id": "UBZ9AMkVn1hM5ZdAgonDKw",
            "alias": "phoenix-childrens-academy-private-preschool-dallas-dallas-2",
            "name": "Phoenix Children's Academy Private Preschool - Dallas",
            "image_url": "https://s3-media1.fl.yelpcdn.com/bphoto/lcZCNwE6Gsasmjjgf7TS4Q/o.jpg",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/phoenix-childrens-academy-private-preschool-dallas-dallas-2?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 19,
            "categories": [
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                },
                {
                    "alias": "preschools",
                    "title": "Preschools"
                }
            ],
            "rating": 5,
            "coordinates": {
                "latitude": 32.92904,
                "longitude": -96.8182
            },
            "transactions": [],
            "location": {
                "address1": "13255 Noel Rd",
                "address2": "",
                "address3": "",
                "city": "Dallas",
                "zip_code": "75240",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "13255 Noel Rd",
                    "Dallas, TX 75240"
                ]
            },
            "phone": "+19727029063",
            "display_phone": "(972) 702-9063",
            "distance": 6312.474998674251
        },
        {
            "id": "JM14dZ59Wf59F7kH3Z6Z1g",
            "alias": "la-petite-academy-of-carrollton-carrollton",
            "name": "La Petite Academy of Carrollton",
            "image_url": "https://s3-media2.fl.yelpcdn.com/bphoto/LHpIReVm5FBvP1NdJT0c1A/o.jpg",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/la-petite-academy-of-carrollton-carrollton?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 5,
            "categories": [
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                },
                {
                    "alias": "preschools",
                    "title": "Preschools"
                }
            ],
            "rating": 5,
            "coordinates": {
                "latitude": 33.000633,
                "longitude": -96.888403
            },
            "transactions": [],
            "location": {
                "address1": "1835 Frankford Rd",
                "address2": "",
                "address3": "",
                "city": "Carrollton",
                "zip_code": "75007",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "1835 Frankford Rd",
                    "Carrollton, TX 75007"
                ]
            },
            "phone": "+18553896464",
            "display_phone": "(855) 389-6464",
            "distance": 4120.2120059954195
        },
        {
            "id": "NroY3SVsYNHPxFc7eyjitQ",
            "alias": "town-north-branch-ymca-dallas",
            "name": "Town North Branch YMCA",
            "image_url": "https://s3-media4.fl.yelpcdn.com/bphoto/Tf64GHeuM3INoAfMcUK54Q/o.jpg",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/town-north-branch-ymca-dallas?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 17,
            "categories": [
                {
                    "alias": "gyms",
                    "title": "Gyms"
                },
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                },
                {
                    "alias": "swimminglessons",
                    "title": "Swimming Lessons/Schools"
                }
            ],
            "rating": 4,
            "coordinates": {
                "latitude": 32.90145,
                "longitude": -96.83574
            },
            "transactions": [],
            "location": {
                "address1": "4332 Northaven Rd",
                "address2": "",
                "address3": "",
                "city": "Dallas",
                "zip_code": "75229",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "4332 Northaven Rd",
                    "Dallas, TX 75229"
                ]
            },
            "phone": "+12143578431",
            "display_phone": "(214) 357-8431",
            "distance": 7944.74453235192
        },
        {
            "id": "7JBJtkREAy4RBkdpgKa3Jw",
            "alias": "kiddin-around-play-care-plano",
            "name": "Kiddin' Around Play Care",
            "image_url": "https://s3-media3.fl.yelpcdn.com/bphoto/0VHC7LouO_-Oj18jk_gdLA/o.jpg",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/kiddin-around-play-care-plano?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 14,
            "categories": [
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                }
            ],
            "rating": 3.5,
            "coordinates": {
                "latitude": 33.032779,
                "longitude": -96.835548
            },
            "transactions": [],
            "location": {
                "address1": "6209 Chapel Hill",
                "address2": "",
                "address3": "",
                "city": "Plano",
                "zip_code": "75093",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "6209 Chapel Hill",
                    "Plano, TX 75093"
                ]
            },
            "phone": "+19724031710",
            "display_phone": "(972) 403-1710",
            "distance": 7815.699490593273
        },
        {
            "id": "cDKx6NPvP_bhYkhJ7-6sxQ",
            "alias": "kiddie-shack-daycare-carrollton",
            "name": "Kiddie Shack Daycare",
            "image_url": "",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/kiddie-shack-daycare-carrollton?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 6,
            "categories": [
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                }
            ],
            "rating": 4,
            "coordinates": {
                "latitude": 32.98921,
                "longitude": -96.88148
            },
            "transactions": [],
            "location": {
                "address1": "2119 Placid Dr",
                "address2": null,
                "address3": "",
                "city": "Carrollton",
                "zip_code": "75007",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "2119 Placid Dr",
                    "Carrollton, TX 75007"
                ]
            },
            "phone": "+14698315142",
            "display_phone": "(469) 831-5142",
            "distance": 2705.6145005410276
        },
        {
            "id": "YgCEzvZkw0_D96LczJ6u-Q",
            "alias": "adventure-kids-playcare-plano",
            "name": "Adventure Kids Playcare",
            "image_url": "https://s3-media3.fl.yelpcdn.com/bphoto/dsuWIdAq8Qf_6-Xd-ZaiiA/o.jpg",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/adventure-kids-playcare-plano?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 12,
            "categories": [
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                }
            ],
            "rating": 4,
            "coordinates": {
                "latitude": 33.028761,
                "longitude": -96.791527
            },
            "transactions": [],
            "location": {
                "address1": "4817 W Park Blvd",
                "address2": "Ste 830",
                "address3": "",
                "city": "Plano",
                "zip_code": "75093",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "4817 W Park Blvd",
                    "Ste 830",
                    "Plano, TX 75093"
                ]
            },
            "phone": "+19726125400",
            "display_phone": "(972) 612-5400",
            "distance": 9762.173419738616
        },
        {
            "id": "tq1Z0PeDxSYg8gnCKg9Enw",
            "alias": "primrose-school-of-plano-at-preston-meadow-plano",
            "name": "Primrose School of Plano at Preston Meadow",
            "image_url": "https://s3-media2.fl.yelpcdn.com/bphoto/o3DFEsIpm0KuaxqsA2QlNg/o.jpg",
            "is_closed": false,
            "url": "https://www.yelp.com/biz/primrose-school-of-plano-at-preston-meadow-plano?adjust_creative=j2c9GZzRJP8UJBdm4rEz9A&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=j2c9GZzRJP8UJBdm4rEz9A",
            "review_count": 8,
            "categories": [
                {
                    "alias": "childcare",
                    "title": "Child Care & Day Care"
                },
                {
                    "alias": "preschools",
                    "title": "Preschools"
                }
            ],
            "rating": 4.5,
            "coordinates": {
                "latitude": 33.053398,
                "longitude": -96.771141
            },
            "transactions": [],
            "location": {
                "address1": "5801 Coit Rd",
                "address2": "",
                "address3": "",
                "city": "Plano",
                "zip_code": "75093",
                "country": "US",
                "state": "TX",
                "display_address": [
                    "5801 Coit Rd",
                    "Plano, TX 75093"
                ]
            },
            "phone": "+19729646826",
            "display_phone": "(972) 964-6826",
            "distance": 13045.974922349864
        }
    ],
    "total": 65,
    "region": {
        "center": {
            "longitude": -96.86714172363281,
            "latitude": 32.968048784023985
        }
    }
}

$('.js-search-form').submit(event => {
	event.preventDefault();
	initialize();
	let userInput = $('.js-query').val();
	console.log(userInput);
	codeAddress();
	$('.js-query').val('');
	// initMap(userInput);
});

let businessArr = yelpData.businesses;
console.log(businessArr);



// businessArr.forEach(function(item) {
//     console.log(item.coordinates);
// });

let geocoder;
let map;
function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng();
    var mapOptions = {
      zoom: 10,
      center: latlng
    }
    map = new google.maps.Map(document.getElementById('map'), mapOptions);
  }

  function codeAddress() {
    let address = $('#address').val();
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status === 'OK') {
        map.setCenter(results[0].geometry.location);
        console.log(results);
        businessArr.forEach(function(item) {
            let businessLoc = item.coordinates;
            console.log(businessLoc);
        });
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Please enter a valid address');
      }
    });
  }